<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµÙØ­Ø© Ø§Ù„Ø´Ø­Ù†</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

        body {
            font-family: "Cairo", sans-serif;
            background-color: #0d0d0d;
            color: #fff;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .header {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #ff0047;
        }

        .input-group, .quantity-selection, .charge-section {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: #0077ff;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            text-align: right;
        }

        .quantities {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .quantity-btn {
            background-color: #2c3e50;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            flex-grow: 1;
        }

        .quantity-btn:hover {
            background-color: #34495e;
        }

        .quantity-btn.selected {
            background-color: #e74c3c;
            border: 2px solid #fff;
        }

        .price-display {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            color: #2ecc71;
            margin-top: 15px;
        }

        .charge-btn {
            width: 100%;
            padding: 15px;
            background-color: #0077ff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 700;
        }

        .charge-btn:hover {
            background-color: #0056b3;
        }

        .back-btn {
            display: block;
            width: 100%;
            text-align: center;
            margin-top: 20px;
            color: #fff;
            text-decoration: none;
            padding: 10px;
            background: #e74c3c;
            border-radius: 8px;
        }

        .toast-notification {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            right: 20px;
            bottom: 30px;
            font-size: 17px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .toast-notification.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @-webkit-keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
        @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
        @-webkit-keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
        @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header" id="gameHeader">ğŸ® Ø´Ø­Ù† </div>

    <div class="input-group">
        <label for="playerIdInput">Ø¥ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ID)</label>
        <input type="text" id="playerIdInput" placeholder="Ø£Ø¯Ø®Ù„ Ø¥ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ù†Ø§" required>
    </div>

    <div class="quantity-selection">
        <label>Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</label>
        <div class="quantities" id="quantitiesContainer">
            </div>
        <div class="price-display" id="priceBox">ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $0.00</div>
    </div>

    <div class="charge-section">
        <button class="charge-btn" onclick="chargeNow()">Ø´Ø­Ù† Ø§Ù„Ø¢Ù†</button>
    </div>
    
    <a href="#" class="back-btn" onclick="goBack()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</a>

</div>

<div id="toastNotification" class="toast-notification"></div>

<script>
    // 1. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    const gameHeader = document.getElementById('gameHeader');
    const quantitiesContainer = document.getElementById('quantitiesContainer');
    const priceBox = document.getElementById('priceBox');
    const playerIdInput = document.getElementById('playerIdInput');
    const toastNotification = document.getElementById('toastNotification');

    // 2. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    let selectedAmount = null;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (ØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙƒÙ…ÙŠØ© Ù‡Ù†Ø§)
    const gameData = {
        'default': {
            unitsPerDollar: 10, 
            pricePerUnit: 1,    
            quantities: [50, 100, 200, 500, 1000] // Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        },
        'FREE FIRE': {
            unitsPerDollar: 50,
            pricePerUnit: 1,
            quantities: [100, 310, 520, 1060]
        },
        'Ø´Ø­Ù† Ø¨ÙŠØ¬ÙŠ Ø¹Ø§Ù„Ù…ÙŠ': {
            unitsPerDollar: 60,
            pricePerUnit: 1,
            quantities: [60, 180, 300, 600, 1500]
        }
    };
    
    // 3. Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        const results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // 4. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
    function initializePage() {
        const gameName = getUrlParameter('game');
        const data = gameData[gameName] || gameData['default'];
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        gameHeader.textContent = `ğŸ® Ø´Ø­Ù† ${gameName}`;

        // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙƒÙ…ÙŠØ§Øª (Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙ… Ø¨Ø¹Ø±Ø¶Ù‡Ø§)
        data.quantities.forEach(amount => {
            const btn = document.createElement('button');
            btn.className = 'quantity-btn';
            btn.textContent = `${amount} Ù†Ù‚Ø·Ø©`;
            // ØªÙ…Ø±ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±
            btn.onclick = () => selectQuantity(btn, amount, data.unitsPerDollar, data.pricePerUnit);
            quantitiesContainer.appendChild(btn);
        });
    }

    // 5. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±
    function updatePriceDisplay(selectedAmount, unitsPerDollar, pricePerUnit) {
        if (selectedAmount !== null && unitsPerDollar && pricePerUnit) {
            const total = (selectedAmount / unitsPerDollar) * pricePerUnit;
            priceBox.textContent = `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $${total.toFixed(2)}`;
        } else {
            priceBox.textContent = `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $0.00`;
        }
    }

    // 6. Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ…ÙŠØ© (Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±)
    function selectQuantity(btn, amount, unitsPerDollar, pricePerUnit) {
        document.querySelectorAll(".quantity-btn").forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");
        selectedAmount = amount; 
        
        // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±
        updatePriceDisplay(selectedAmount, unitsPerDollar, pricePerUnit);
    }
    
    // 7. Ø§Ù„Ø¹ÙˆØ¯Ø©
    function goBack() {
        window.location.href = `index.html`; 
    }

    // 8. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    function showToast(message, isSuccess = false) {
        toastNotification.style.backgroundColor = isSuccess ? '#2ecc71' : '#e74c3c'; 
        toastNotification.textContent = message;
        toastNotification.classList.add("show");
        
        setTimeout(() => {
            toastNotification.classList.remove("show");
        }, 3000);
    }

    // 9. Ø¯Ø§Ù„Ø© Ø§Ù„Ø´Ø­Ù†
    function chargeNow() {
        const playerId = playerIdInput.value.trim();

        if (!playerId) {
            showToast("ÙŠØ¬Ø¨ ÙˆØ¶Ø¹ Ø¥ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…");
            playerIdInput.focus();
            return;
        }

        if (selectedAmount === null) { 
            showToast("ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ…ÙŠØ©");
            return;
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ø´Ø­Ù†
        const gameName = getUrlParameter('game');
        const data = gameData[gameName] || gameData['default'];
        const totalCost = (selectedAmount / data.unitsPerDollar) * data.pricePerUnit;
        
        const message = `ØªÙ… Ø·Ù„Ø¨ Ø´Ø­Ù† ${selectedAmount} Ù†Ù‚Ø·Ø© Ù„Ù€ ID: ${playerId} Ø¨ØªÙƒÙ„ÙØ© $${totalCost.toFixed(2)}.`;
        
        showToast(`âš ï¸ ${message} - Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§Ù Ø­Ø§Ù„ÙŠÙ‹Ø§`, false); 
    }

    // ØªØ´ØºÙŠÙ„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    initializePage();
</script>

</body>
</html>
